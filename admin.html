<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - La Route du Cacao</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="admin-body">
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <i class="fas fa-ship"></i>
                <h1>Administration</h1>
                <p>La Route du Cacao</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">Nom d'utilisateur</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Mot de passe</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">Se connecter</button>
            </form>
            <div id="loginError" class="login-error" style="display: none;">
                Identifiants incorrects
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <!-- Header -->
        <header class="admin-header">
            <div class="admin-header-content">
                <div class="admin-logo">
                    <i class="fas fa-ship"></i>
                    <span>Administration - La Route du Cacao</span>
                </div>
                <div class="admin-nav">
                    <button id="logoutBtn" class="btn btn-secondary">
                        <i class="fas fa-sign-out-alt"></i>
                        Déconnexion
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="admin-main">
            <div class="admin-container">
                <!-- Sidebar -->
                <aside class="admin-sidebar">
                    <nav class="admin-nav-menu">
                        <a href="#dashboard" class="admin-nav-item active" data-section="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            Tableau de bord
                        </a>
                        <a href="#videos" class="admin-nav-item" data-section="videos">
                            <i class="fas fa-video"></i>
                            Gestion Vidéos
                        </a>
                        <a href="#playlists" class="admin-nav-item" data-section="playlists">
                            <i class="fas fa-list"></i>
                            Playlists
                        </a>
                        <a href="#lives" class="admin-nav-item" data-section="lives">
                            <i class="fas fa-broadcast-tower"></i>
                            Lives
                        </a>
                        <a href="#settings" class="admin-nav-item" data-section="settings">
                            <i class="fas fa-cog"></i>
                            HELP
                        </a>
                    </nav>
                </aside>

                <!-- Content Area -->
                <div class="admin-content">
                    <!-- Dashboard Section -->
                    <section id="dashboard" class="admin-section active">
                        <div class="section-header">
                            <h2>Tableau de bord</h2>
                            <p>Vue d'ensemble de votre espace d'administration</p>
                        </div>
                        
                        <div class="dashboard-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-video"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="totalVideos">0</h3>
                                    <p>Vidéos publiées</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-list"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="totalPlaylists">4</h3>
                                    <p>Playlists créées</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-broadcast-tower"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="totalLives">0</h3>
                                    <p>Lives programmés</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="totalViews">0</h3>
                                    <p>Vues totales</p>
                                </div>
                            </div>
                        </div>

                        <div class="recent-activity">
                            <h3>Activité récente</h3>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <i class="fas fa-plus-circle"></i>
                                    <span>Aucune activité récente</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Videos Section -->
                    <section id="videos" class="admin-section">
                        <div class="section-header">
                            <h2>Gestion des Vidéos</h2>
                            <button id="addVideoBtn" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Ajouter une vidéo
                            </button>
                        </div>
                        
                        <div class="videos-list">
                            <div class="video-item">
                                <div class="video-info">
                                    <h3>Aucune vidéo publiée</h3>
                                    <p>Commencez par ajouter votre première vidéo</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Playlists Section -->
                    <section id="playlists" class="admin-section">
                        <div class="section-header">
                            <h2>Gestion des Playlists</h2>
                            <button id="addPlaylistBtn" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Créer une playlist
                            </button>
                        </div>
                        
                        <div class="playlists-grid">
                            <div class="playlist-admin-card">
                                <div class="playlist-icon">
                                    <i class="fas fa-microscope"></i>
                                </div>
                                <h3>Recherche Scientifique</h3>
                                <p>Relevés environnementaux et études marines</p>
                                <span class="video-count">0 vidéos</span>
                                <button class="btn btn-secondary">Modifier</button>
                            </div>

                            <div class="playlist-admin-card">
                                <div class="playlist-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <h3>Rencontres Humaines</h3>
                                <p>Portraits et témoignages inspirants</p>
                                <span class="video-count">0 vidéos</span>
                                <button class="btn btn-secondary">Modifier</button>
                            </div>

                            <div class="playlist-admin-card">
                                <div class="playlist-icon">
                                    <i class="fas fa-leaf"></i>
                                </div>
                                <h3>Solutions Durables</h3>
                                <p>Innovations écologiques documentées</p>
                                <span class="video-count">0 vidéos</span>
                                <button class="btn btn-secondary">Modifier</button>
                            </div>

                            <div class="playlist-admin-card">
                                <div class="playlist-icon">
                                    <i class="fas fa-ship"></i>
                                </div>
                                <h3>Vie à Bord</h3>
                                <p>Le quotidien de notre équipage</p>
                                <span class="video-count">0 vidéos</span>
                                <button class="btn btn-secondary">Modifier</button>
                            </div>
                        </div>
                    </section>

                    <!-- Lives Section -->
                    <section id="lives" class="admin-section">
                        <div class="section-header">
                            <h2>Gestion des Lives</h2>
                            <button id="addLiveBtn" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Programmer un live
                            </button>
                        </div>
                        
                        <div class="live-streaming-setup">
                            <div class="streaming-platforms">
                                <div class="platform-card">
                                    <div class="platform-icon">
                                        <i class="fab fa-twitch"></i>
                                    </div>
                                    <h3>Twitch</h3>
                                    <div class="platform-status">
                                        <span class="status-indicator offline"></span>
                                        <span>Déconnecté</span>
                                    </div>
                                    <div class="platform-actions">
                                        <button class="btn btn-secondary" onclick="adminPanel.connectTwitch()">
                                            <i class="fab fa-twitch"></i>
                                            Connecter
                                        </button>
                                        <button class="btn btn-primary" onclick="adminPanel.startTwitchStream()">
                                            <i class="fas fa-play"></i>
                                            Démarrer
                                        </button>
                                    </div>
                                    <div class="stream-info">
                                        <p><strong>Clé de diffusion :</strong></p>
                                        <code class="stream-key">rtmp://live.twitch.tv/app/</code>
                                        <button class="btn btn-secondary btn-sm" onclick="adminPanel.copyStreamKey('twitch')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="platform-card">
                                    <div class="platform-icon">
                                        <i class="fab fa-youtube"></i>
                                    </div>
                                    <h3>YouTube</h3>
                                    <div class="platform-status">
                                        <span class="status-indicator offline"></span>
                                        <span>Déconnecté</span>
                                    </div>
                                    <div class="platform-actions">
                                        <button class="btn btn-secondary" onclick="adminPanel.connectYouTube()">
                                            <i class="fab fa-youtube"></i>
                                            Connecter
                                        </button>
                                        <button class="btn btn-primary" onclick="adminPanel.startYouTubeStream()">
                                            <i class="fas fa-play"></i>
                                            Démarrer
                                        </button>
                                    </div>
                                    <div class="stream-info">
                                        <p><strong>Clé de diffusion :</strong></p>
                                        <code class="stream-key">rtmp://a.rtmp.youtube.com/live2/</code>
                                        <button class="btn btn-secondary btn-sm" onclick="adminPanel.copyStreamKey('youtube')">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="streaming-settings">
                                <h3>Paramètres de diffusion</h3>
                                <div class="settings-grid">
                                    <div class="form-group">
                                        <label>Résolution</label>
                                        <select id="streamResolution">
                                            <option value="1080p">1080p (Full HD)</option>
                                            <option value="720p" selected>720p (HD)</option>
                                            <option value="480p">480p (SD)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Débit (kbps)</label>
                                        <select id="streamBitrate">
                                            <option value="6000">6000 (Recommandé)</option>
                                            <option value="4500">4500</option>
                                            <option value="3000">3000</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>FPS</label>
                                        <select id="streamFps">
                                            <option value="60">60 FPS</option>
                                            <option value="30" selected>30 FPS</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lives-list">
                            <h3>Lives programmés</h3>
                            <div class="live-item">
                                <div class="live-info">
                                    <h3>Aucun live programmé</h3>
                                    <p>Programmez votre premier live streaming</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Settings Section -->
                    <section id="settings" class="admin-section active">
                        <div class="section-header">
                            <h2>Contrôle du bouton HELP</h2>
                        </div>
                        <div style="text-align:center;margin-bottom:2rem;">
                            <button id="toggleHelpBlink" class="btn btn-help" style="font-size:1.1rem;">HELP ON/OFF</button>
                            <span id="helpBlinkStatus" style="margin-left:1.2em;font-weight:600;color:#5bb6ff;"></span>
                        </div>
                        <form id="helpMessageForm" style="max-width:400px;margin:2rem auto 0 auto;text-align:left;">
                            <label for="helpType" style="font-weight:600;">Type de besoin :</label>
                            <select id="helpType" name="helpType" style="width:100%;margin-bottom:1rem;padding:0.5rem;">
                                <option value="">-- Choisir --</option>
                                <option value="aide-bateau">Aide sur le bateau</option>
                                <option value="nourriture">Nourriture</option>
                                <option value="argent">Argent</option>
                                <option value="autre">Autre</option>
                            </select>
                            <label for="helpMessage" style="font-weight:600;">Message :</label>
                            <textarea id="helpMessage" name="helpMessage" rows="3" style="width:100%;margin-bottom:1rem;padding:0.5rem;" placeholder="Décrivez votre besoin..."></textarea>
                            <button type="submit" class="btn btn-primary" style="width:100%;">Enregistrer le message</button>
                        </form>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="videoModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ajouter une vidéo</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="videoForm" class="modal-form">
                <div class="form-group">
                    <label>Titre de la vidéo</label>
                    <input type="text" name="title" required>
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Plateforme</label>
                    <select name="platform" id="videoPlatform" onchange="adminPanel.updateVideoUrlPlaceholder()">
                        <option value="youtube">YouTube</option>
                        <option value="vimeo">Vimeo</option>
                        <option value="dailymotion">Dailymotion</option>
                        <option value="other">Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>URL de la vidéo</label>
                    <input type="url" name="videoUrl" id="videoUrl" required placeholder="https://www.youtube.com/watch?v=...">
                    <small class="form-help">Collez l'URL complète de la vidéo</small>
                </div>
                <div class="form-group">
                    <label>ID de la vidéo (optionnel)</label>
                    <input type="text" name="videoId" id="videoId" placeholder="Extrait automatiquement de l'URL">
                    <small class="form-help">L'ID sera extrait automatiquement de l'URL</small>
                </div>
                <div class="form-group">
                    <label>Thumbnail (URL de l'image)</label>
                    <input type="url" name="thumbnailUrl" id="thumbnailUrl" placeholder="https://img.youtube.com/vi/VIDEO_ID/maxresdefault.jpg">
                    <small class="form-help">Laissez vide pour utiliser la thumbnail automatique</small>
                </div>
                <div class="form-group">
                    <label>Durée (format: MM:SS)</label>
                    <input type="text" name="duration" placeholder="05:30">
                </div>
                <div class="form-group">
                    <label>Playlist</label>
                    <select name="playlist">
                        <option value="">Aucune playlist</option>
                        <option value="recherche">Recherche Scientifique</option>
                        <option value="rencontres">Rencontres Humaines</option>
                        <option value="solutions">Solutions Durables</option>
                        <option value="vie-bord">Vie à Bord</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tags (séparés par des virgules)</label>
                    <input type="text" name="tags" placeholder="expédition, cacao, écologie, marine">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-cancel">Annuler</button>
                    <button type="submit" class="btn btn-primary">Publier</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Playlist Modal -->
    <div id="playlistModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Créer une playlist</h3>
                <button class="modal-close" onclick="adminPanel.closePlaylistModal()">&times;</button>
            </div>
            <form id="playlistForm" class="modal-form">
                <div class="form-group">
                    <label>Nom de la playlist</label>
                    <input type="text" name="name" required placeholder="Ma nouvelle playlist">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea name="description" rows="3" required placeholder="Description de la playlist"></textarea>
                </div>
                <div class="form-group">
                    <label>Icône</label>
                    <select name="icon" required>
                        <option value="fas fa-microscope">🔬 Microscope</option>
                        <option value="fas fa-users">👥 Utilisateurs</option>
                        <option value="fas fa-leaf">🌿 Feuille</option>
                        <option value="fas fa-ship">🚢 Bateau</option>
                        <option value="fas fa-camera">📷 Caméra</option>
                        <option value="fas fa-globe">🌍 Globe</option>
                        <option value="fas fa-heart">❤️ Cœur</option>
                        <option value="fas fa-star">⭐ Étoile</option>
                        <option value="fas fa-lightbulb">💡 Ampoule</option>
                        <option value="fas fa-tree">🌳 Arbre</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="adminPanel.closePlaylistModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Créer</button>
                </div>
            </form>
        </div>
    </div>

    <script src="admin.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // ... existing code ...
        // Contrôle du bouton HELP
        const toggleHelpBlink = document.getElementById('toggleHelpBlink');
        const helpBlinkStatus = document.getElementById('helpBlinkStatus');
        function updateAdminHelpBlink() {
            const blink = localStorage.getItem('helpBlink') === 'on';
            helpBlinkStatus.textContent = blink ? 'Clignotement ACTIVÉ' : 'Clignotement DÉSACTIVÉ';
            toggleHelpBlink.classList.toggle('help-blink', blink);
        }
        if(toggleHelpBlink && helpBlinkStatus) {
            updateAdminHelpBlink();
            toggleHelpBlink.onclick = function() {
                const blink = localStorage.getItem('helpBlink') === 'on';
                localStorage.setItem('helpBlink', blink ? 'off' : 'on');
                updateAdminHelpBlink();
                window.dispatchEvent(new Event('storage'));
            };
            window.addEventListener('storage', updateAdminHelpBlink);
        }
    });
    </script>
</body>
</html> 